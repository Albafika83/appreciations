<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>G√©n√©rateur d'Appr√©ciations Scolaires</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Sidebar d'aide -->
    <div id="helpSidebar" class="help-sidebar">
        <div class="help-sidebar-header">
            <h2>üìñ Mode d'emploi</h2>
            <button id="closeSidebarBtn" class="close-sidebar-btn">
                <span class="close-icon">‚úï</span>
            </button>
        </div>
        <div class="help-sidebar-content">
            <div id="helpContentMatiere" class="help-content-section active">
                <h3>üìö Appr√©ciations Mati√®re</h3>
                <div class="help-step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <h4>üìÅ Importez vos donn√©es CSV</h4>
                        <p>Choisissez entre deux m√©thodes : <strong>Import fichier</strong> (s√©lectionnez un fichier CSV) ou <strong>Coller CSV</strong> (collez directement vos donn√©es). Formats support√©s : Pronote et autres logiciels scolaires.</p>
                    </div>
                </div>
                
                <div class="help-step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <h4>üìä Configurez les types d'√©valuation</h4>
                        <p>Apr√®s l'import, un aper√ßu s'affiche. D√©finissez le type de chaque colonne : Devoir sur table, Interrogation ou TP. Si vous ne changez rien, la distinction se fait automatiquement par coefficient.</p>
                    </div>
                </div>
                
                <div class="help-step">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <h4>üë• D√©finissez l'investissement des √©l√®ves</h4>
                        <p>S√©lectionnez les crit√®res de comportement et d'investissement pour chaque √©l√®ve (participation, efforts, s√©rieux, etc.).</p>
                    </div>
                </div>
                
                <div class="help-step">
                    <div class="step-number">4</div>
                    <div class="step-content">
                        <h4>ü§ñ G√©n√©ration automatique</h4>
                        <p>L'IA analyse les notes, l'√©volution et l'investissement pour g√©n√©rer des appr√©ciations personnalis√©es de 150-200 caract√®res.</p>
                    </div>
                </div>
                
                <div class="help-step">
                    <div class="step-number">5</div>
                    <div class="step-content">
                        <h4>üìã Copiez ou exportez</h4>
                        <p>Utilisez les boutons de copie individuelle ou exportez toutes les appr√©ciations en CSV pour les int√©grer dans votre logiciel de notes.</p>
                    </div>
                </div>
            </div>

            <div id="helpContentBulletin" class="help-content-section">
                <h3>üìã Bulletin Prof Principal</h3>
                <div class="help-step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <h4>üìÖ S√©lectionnez le trimestre</h4>
                        <p>Choisissez le trimestre concern√©. Pour le 3√®me trimestre, l'IA adaptera l'appr√©ciation pour un bilan de fin d'ann√©e.</p>
                    </div>
                </div>
                
                <div class="help-step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <h4>üìã Collez le bulletin</h4>
                        <p>Copiez le bulletin depuis votre logiciel de notes et collez-le dans la zone de texte. Format accept√© : 8 lignes par mati√®re (nom, prof, note, moyenne, min, max, heures, appr√©ciation).</p>
                    </div>
                </div>
                
                <div class="help-step">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <h4>ü§ñ G√©n√©ration de l'appr√©ciation g√©n√©rale</h4>
                        <p>L'IA analyse toutes les mati√®res, la moyenne g√©n√©rale et les appr√©ciations pour cr√©er une synth√®se coh√©rente et professionnelle.</p>
                    </div>
                </div>
                
                <div class="help-step">
                    <div class="step-number">4</div>
                    <div class="step-content">
                        <h4>üíæ Copiez le r√©sultat</h4>
                        <p>Utilisez les boutons pour copier l'appr√©ciation g√©n√©rale seule ou le bulletin complet format√© pour l'int√©grer dans votre logiciel.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Overlay pour fermer la sidebar -->
    <div id="sidebarOverlay" class="sidebar-overlay"></div>

    <div class="container">
        <header>
            <h1>üéì G√©n√©rateur d'Appr√©ciations Scolaires</h1>
            <p>G√©n√©ration automatique d'appr√©ciations personnalis√©es avec IA</p>
            <div class="api-status">
                <span class="status-indicator">üîó</span>
                <span id="apiStatusText">Webhook n8n non configur√©</span>
            </div>
            
            <!-- Bouton d'aide -->
            <button id="helpToggleBtn" class="help-toggle-btn">
                <span class="help-icon">‚ùì</span>
                Mode d'emploi
            </button>
            
            <!-- Navigation entre les pages -->
            <nav class="page-navigation">
                <button id="pageMatiere" class="nav-btn active">
                    <span class="nav-icon">üìö</span>
                    Appr√©ciations Mati√®re
                </button>
                <button id="pageBulletin" class="nav-btn">
                    <span class="nav-icon">üìã</span>
                    Bulletin Prof Principal
                </button>
            </nav>
        </header>

        <main>
            <!-- Page Appr√©ciations Mati√®re -->
            <div id="matiereContent" class="page-content active">
                <!-- Upload Section -->
                <section class="upload-section">
                    <h2>üìÅ Import des Notes</h2>
                    <div class="upload-grid">
                        <div class="upload-card">
                            <h3>Trimestre 1</h3>
                            <div class="import-method-selector">
                                <button class="method-btn active" data-method="file" data-trimester="1">
                                    <span class="method-icon">üìÑ</span>
                                    Import fichier
                                </button>
                                <button class="method-btn" data-method="paste" data-trimester="1">
                                    <span class="method-icon">üìã</span>
                                    Coller CSV
                                </button>
                            </div>
                            <div class="import-content">
                                <div class="file-import-area active" data-import="file-1">
                                    <label for="trimestre1" class="file-label">
                                        <span class="upload-icon">üìÑ</span>
                                        <span class="upload-text">Choisir le fichier CSV</span>
                                        <input type="file" id="trimestre1" class="file-input" accept=".csv">
                                    </label>
                                </div>
                                <div class="paste-import-area" data-import="paste-1">
                                    <textarea 
                                        id="csvPaste1" 
                                        class="csv-paste-area" 
                                        placeholder="Collez vos donn√©es CSV ici...

Exemple de format :
&quot;19 √©l√®ves&quot;	Classes	Moyenne	07/06	15/05	28/04
			4	1	4
&quot;ABDELLAH Ali&quot;	1G5	14,42	17,73	10,00	12,21
&quot;AGUENANA Noam&quot;	1G2	6,93	9,09	10,00	4,00
..."
                                        rows="10"
                                    ></textarea>
                                    <button class="validate-paste-btn" data-trimester="1" disabled>
                                        <span class="btn-icon">‚úÖ</span>
                                        Valider les donn√©es
                                    </button>
                                </div>
                            </div>
                            <div id="status1" class="file-status"></div>
                        </div>
                        
                        <div class="upload-card">
                            <h3>Trimestre 2</h3>
                            <div class="import-method-selector">
                                <button class="method-btn active" data-method="file" data-trimester="2">
                                    <span class="method-icon">üìÑ</span>
                                    Import fichier
                                </button>
                                <button class="method-btn" data-method="paste" data-trimester="2">
                                    <span class="method-icon">üìã</span>
                                    Coller CSV
                                </button>
                            </div>
                            <div class="import-content">
                                <div class="file-import-area active" data-import="file-2">
                                    <label for="trimestre2" class="file-label">
                                        <span class="upload-icon">üìÑ</span>
                                        <span class="upload-text">Choisir le fichier CSV</span>
                                        <input type="file" id="trimestre2" class="file-input" accept=".csv">
                                    </label>
                                </div>
                                <div class="paste-import-area" data-import="paste-2">
                                    <textarea 
                                        id="csvPaste2" 
                                        class="csv-paste-area" 
                                        placeholder="Collez vos donn√©es CSV ici..."
                                        rows="10"
                                    ></textarea>
                                    <button class="validate-paste-btn" data-trimester="2" disabled>
                                        <span class="btn-icon">‚úÖ</span>
                                        Valider les donn√©es
                                    </button>
                                </div>
                            </div>
                            <div id="status2" class="file-status"></div>
                        </div>
                        
                        <div class="upload-card">
                            <h3>Trimestre 3</h3>
                            <div class="import-method-selector">
                                <button class="method-btn active" data-method="file" data-trimester="3">
                                    <span class="method-icon">üìÑ</span>
                                    Import fichier
                                </button>
                                <button class="method-btn" data-method="paste" data-trimester="3">
                                    <span class="method-icon">üìã</span>
                                    Coller CSV
                                </button>
                            </div>
                            <div class="import-content">
                                <div class="file-import-area active" data-import="file-3">
                                    <label for="trimestre3" class="file-label">
                                        <span class="upload-icon">üìÑ</span>
                                        <span class="upload-text">Choisir le fichier CSV</span>
                                        <input type="file" id="trimestre3" class="file-input" accept=".csv">
                                    </label>
                                </div>
                                <div class="paste-import-area" data-import="paste-3">
                                    <textarea 
                                        id="csvPaste3" 
                                        class="csv-paste-area" 
                                        placeholder="Collez vos donn√©es CSV ici..."
                                        rows="10"
                                    ></textarea>
                                    <button class="validate-paste-btn" data-trimester="3" disabled>
                                        <span class="btn-icon">‚úÖ</span>
                                        Valider les donn√©es
                                    </button>
                                </div>
                            </div>
                            <div id="status3" class="file-status"></div>
                        </div>
                    </div>
                </section>

                <!-- CSV Preview Section -->
                <section id="csvPreviewSection" class="csv-preview-section" style="display: none;">
                    <h2>üìä Aper√ßu et Configuration des Notes</h2>
                    <div class="csv-preview-container">
                        <div class="preview-header">
                            <p>Configurez le type d'√©valuation pour chaque colonne de notes :</p>
                        </div>
                        <div id="csvPreviewContent" class="csv-preview-content"></div>
                        <div class="preview-controls">
                            <button id="validateTypesBtn" class="validate-btn">
                                <span class="btn-icon">‚úÖ</span>
                                Valider et Continuer
                            </button>
                            <button id="backToUploadBtn" class="back-btn">
                                <span class="btn-icon">üîô</span>
                                Retour √† l'import
                            </button>
                        </div>
                    </div>
                </section>

                <!-- Analysis Section -->
                <section class="analysis-section">
                    <h2>üîç Analyse et G√©n√©ration</h2>
                    <button id="analyzeBtn" class="analyze-btn" disabled>
                        <span class="btn-icon">üìä</span>
                        Importer les donn√©es
                    </button>
                </section>

                <!-- Results Section -->
                <section id="resultsSection" class="results-section" style="display: none;">
                    <h2>üìù Appr√©ciations G√©n√©r√©es</h2>
                    <div class="results-controls">
                        <button id="exportBtn" class="export-btn">
                            <span class="btn-icon">üíæ</span>
                            Exporter CSV
                        </button>
                        <button id="copyAllBtn" class="copy-btn">
                            <span class="btn-icon">üìã</span>
                            Copier Tout
                        </button>
                    </div>
                    <div id="resultsContainer" class="results-container"></div>
                </section>


            </div>

            <!-- Page Bulletin Prof Principal -->
            <div id="bulletinContent" class="page-content">
                <section class="bulletin-section">
                    <h2>üìã G√©n√©ration de Bulletin Complet</h2>
                    <p class="bulletin-instructions">
                        Collez directement le bulletin depuis votre presse-papiers dans la zone ci-dessous pour g√©n√©rer un bulletin complet avec appr√©ciation g√©n√©rale.
                    </p>
                    
                    <div class="trimester-selection">
                        <label for="trimesterSelect" class="trimester-label">
                            <span class="trimester-icon">üìÖ</span>
                            <span class="trimester-text">S√©lectionnez le trimestre :</span>
                        </label>
                        <select id="trimesterSelect" class="trimester-select">
                            <option value="1">1er Trimestre</option>
                            <option value="2">2√®me Trimestre</option>
                            <option value="3">3√®me Trimestre (Fin d'ann√©e)</option>
                        </select>
                    </div>
                    
                    <div class="bulletin-paste-area">
                        <div class="paste-header">
                            <label for="bulletinTextArea" class="paste-label">
                                <span class="paste-icon">üìã</span>
                                <span class="paste-text">Collez le bulletin ici (Ctrl+V)</span>
                            </label>
                            <button id="pasteFromClipboardBtn" class="paste-btn">
                                <span class="btn-icon">üìã</span>
                                Coller depuis le presse-papiers
                            </button>
                        </div>
                        <textarea 
                            id="bulletinTextArea" 
                            class="bulletin-textarea" 
                            placeholder="Collez ici le bulletin complet de l'√©l√®ve...

Exemple de format attendu :
ALLEMAND LV2
Mme GOURDIN
4,08
10,41
3,55
16,66
5h00
Ensemble tr√®s fragile ce trimestre...

ANGLAIS LV1
Mme SIMONELLI
12,21
..."
                            rows="15"
                        ></textarea>
                        <div id="bulletinStatus" class="file-status"></div>
                    </div>

                    <div class="bulletin-controls">
                        <button id="generateBulletinBtn" class="generate-btn" disabled>
                            <span class="btn-icon">ü§ñ</span>
                            G√©n√©rer le Bulletin
                        </button>
                        <button id="clearBulletinBtn" class="clear-btn">
                            <span class="btn-icon">üóëÔ∏è</span>
                            Effacer
                        </button>
                    </div>
                </section>

                <!-- Bulletin Results -->
                <section id="bulletinResultsSection" class="results-section" style="display: none;">
                    <h2>üìÑ Bulletin G√©n√©r√©</h2>
                    <div class="results-controls">
                        <button id="copyBulletinBtn" class="copy-btn">
                            <span class="btn-icon">üìã</span>
                            Copier le Bulletin Complet
                        </button>
                    </div>
                    <div id="bulletinContainer" class="bulletin-container"></div>
                </section>


            </div>
        </main>

        <footer>
            <p>¬© Cr√©√© par MRajaonarison</p>
        </footer>
    </div>

    <script src="script.js"></script>
</body>
</html>